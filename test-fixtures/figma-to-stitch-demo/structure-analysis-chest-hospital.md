# 胸科首页结构分析报告

## 1. 基本信息

- **文件名**: 胸科首页
- **页面名称**: 胸科首页
- **文件 Key**: GgNqIztxMCacqG0u4TnRtm
- **分析日期**: 2026-01-28
- **分析人**: AI Assistant

---

## 2. 顶层区域总览（基于归组结果）

> ⚠️ **重要**: 以下Y范围是**归组完成后的统计值**，不是分区依据。
> 分区依据是"锚点识别 + 覆盖规则"，见第3节。

### 画布信息
- **尺寸**: 375 x 1376 px
- **背景**: 白色 (#FFFFFF)

### 区域列表（按视觉顺序）

| 序号 | 区域名称 | 结构类型 | 布局细节 | 主要内容 | Y范围(统计值) |
|------|----------|------|------|----------|---------------|
| 1 | Header | Row | - | iOS导航栏 | 0-88 |
| 2 | 用户信息区 | Free/Stack | 两簇对齐 | 头像、用户名、步数、活跃度 | 88-268 |
| 3 | 轮播图 | Stack | - | 医院图片、遮罩、指示器 | 156-304 |
| 4 | 功能入口区 | Grid | 3x3 | 9个功能卡片 | 320-634 |
| 5 | 新闻专区 | Grid | 2x2 | 4个新闻卡片 | 650-885 |
| 6 | 活动专区 | Row | 1x2 | 2个活动卡片 | 895-1037 |
| 7 | 新闻资讯 | Column | - | 2条新闻列表项 | 1053-1301 |

---

## 3. 区域识别过程（透明化）

### 3.1 锚点识别（按优先级）

| 优先级 | 类型 | 锚点名称 | 识别为区域 | 理由 |
|--------|------|----------|------------|------|
| P0 | COMPONENT | Navigation Bar | Header | 最高优先级，语义明确 |
| P2 | VECTOR | Rectangle 1 | 用户信息区 | 大面积背景(67500px²)，有渐变填充 |
| P3 | GROUP | 轮播图 | 轮播图 | 独立功能组件，与背景估算重叠75% |
| P3 | GROUP | 新闻专区 | 新闻专区 | 语义明确容器 |
| P3 | GROUP | 活动专区 | 活动专区 | 语义明确容器 |
| P3 | GROUP | 资讯 | 新闻资讯 | 语义明确容器 |
| - | 聚类 | 空间聚类(9卡片) | 功能入口区 | 无统一容器，按位置聚类 |

### 3.2 重叠冲突处理

**冲突场景**: 轮播图 vs 用户信息区背景

| 元素 | 锚点A覆盖 | 锚点B覆盖 | 裁决结果 | 裁决依据 |
|------|-----------|-----------|----------|----------|
| 轮播图 | Rectangle 1: 估算75% | - | **独立区域** | 前景组件优先原则：轮播是独立功能组件，非背景装饰 |

> **规则**: 前景组件（轮播/卡片/列表）即使被背景覆盖，也作为独立区域或子区域处理，背景不吞并前景。

### 3.3 元素归组（覆盖规则）

**阈值设定**（经验值，可调）：
- `COVERAGE_THRESHOLD = 0.70` (70%)

**用户信息区归组**:

| 元素 | 与Rectangle 1重叠率 | 归属 | 说明 |
|------|---------------------|------|------|
| Ellipse 4 (头像) | 100% | 用户信息区 | 完全包含 |
| xkyy0325 (用户名) | 100% | 用户信息区 | 完全包含 |
| 今日步数 | 100% | 用户信息区 | 完全包含 |
| Group 1 (活跃度) | 100% | 用户信息区 | 完全包含 |
| 轮播图 | 估算75% | **独立区域** | 前景组件优先 |

---

## 4. 区域详细拆解

### 区域 1: Header

**归组依据**
- **锚点类型**: COMPONENT
- **锚点名称**: `1.iOS/1.Bars/2.Navigation Bar/*X - Default`
- **优先级**: P0（最高）

**布局推断**

| 属性 | 值 | 推断依据 | 置信度 | 来源 |
|------|-----|----------|--------|------|
| 类型 | Row | iOS标准导航栏为横向布局 | 0.95 | Screenshot |
| 对齐 | 居中/两端 | 标题居中，按钮在两侧 | 0.90 | Screenshot |

**子结构（JSON事实）**

```
类型: COMPONENT (INSTANCE)
子元素: 未展开（组件内部结构）
```

**关键元素（事实 vs 推断）**

| 元素 | 内容 | 类型 | 来源 |
|------|------|------|------|
| 状态栏 | 时间、信号、电量 | COMPONENT内部 | JSON（未展开）|
| 标题 | "首页" | TEXT | 推断+Screenshot |
| 导航按钮 | 返回箭头 | INSTANCE | 推断+Screenshot |

---

### 区域 2: 用户信息区

**归组依据**
- **锚点类型**: VECTOR（背景矩形）
- **锚点名称**: Rectangle 1
- **覆盖规则**: 重叠率 > COVERAGE_THRESHOLD(70%) 的元素归入

**布局推断**

| 属性 | 值 | 推断依据 | 置信度 | 来源 |
|------|-----|----------|--------|------|
| 类型 | Free/Stack | 元素为散点分布，无严格行列对齐 | 0.60 | JSON + Screenshot |
| 左簇 | 头像 + 用户名 + 活跃度 | x坐标接近(16-65)，视觉左对齐 | 0.80 | JSON |
| 右簇 | 步数 | x=289，独立右对齐 | 0.80 | JSON |
| 说明 | 两簇对齐 | 左右两簇各自对齐，但非严格Row布局 | - | 推断 |

**子结构（JSON事实 vs 推断）**

| 元素 | JSON类型 | 位置 | 推断语义 | 事实/推断 |
|------|----------|------|----------|-----------|
| Rectangle 1 | VECTOR | (0, 88) | 背景 | 事实 |
| Ellipse 4 | ELLIPSE | (16, 102) | 头像 | 推断 |
| xkyy0325 | TEXT | (65, 106) | 用户名 | 事实(文本内容) |
| 今日步数 | GROUP | (289, 112) | 步数指标 | 推断(命名) |
| Group 1 | GROUP | (64, 125) | 活跃度 | 推断(子文本"20") |

**异常/缺失**
- **结构异常**: 元素分散，无统一GROUP/FRAME容器
- **命名异常**: Group 1无语义（应为"活跃度"）

---

### 区域 3: 轮播图

**归组依据**
- **锚点类型**: GROUP
- **锚点名称**: 轮播图
- **叠加处理**: 与用户信息区估算重叠75%（计算：重叠面积112px / 轮播图高度148px），但前景组件优先，独立成区

**布局推断**

| 属性 | 值 | 推断依据 | 置信度 | 来源 |
|------|-----|----------|--------|------|
| 类型 | Stack | 图片在下，遮罩和指示器在上 | 0.90 | JSON + Screenshot |
| 层级 | 3层 | 图片 → 遮罩 → 指示器 | 0.85 | JSON |

**子结构（JSON事实 vs 推断）**

| 元素 | JSON类型 | 位置 | 填充类型 | 语义推断 | 来源 |
|------|----------|------|----------|----------|------|
| 19771756969732_.pic_hd 1 | RECTANGLE | (15, 120) | IMAGE | 医院大楼图片 | JSON+Screenshot |
| Rectangle 2 | RECTANGLE | (16, 156) | SOLID(灰色) | 圆角遮罩(16px) | JSON |
| 轮播点 | GROUP | (303, 284) | - | 3个圆点指示器 | 推断+Screenshot |

> **注意**: 图片是 RECTANGLE + IMAGE fill（JSON事实），不是 Image 组件。

---

### 区域 4: 功能入口区

**归组依据**
- **方法**: 空间聚类（DBSCAN/网格桶）
- **原因**: 无统一容器，9个独立卡片
- **聚类参数**: 距离阈值 ≈ 平均间距 × 1.2

**布局推断**

| 属性 | 值 | 推断依据 | 置信度 | 来源 |
|------|-----|----------|--------|------|
| 类型 | Grid | 3行3列，行列对齐 | 0.95 | JSON |
| 行数 | 3 | y坐标分3组(320/430/540) | 0.95 | JSON |
| 列数 | 3 | 每行3个元素，x坐标一致 | 0.95 | JSON |
| 间距 | X:16px, Y:16px | 相邻元素坐标差 | 0.90 | JSON |

**推断过程（透明化）**:
```
1. 提取9个卡片候选（名称1-9，类型GROUP，面积~10000px²）
2. 按y坐标聚类：
   - 第1行: y≈320 (卡片1,2,3)
   - 第2行: y≈430 (卡片4,5,6)
   - 第3行: y≈540 (卡片7,8,9)
3. 每行按x排序，确认3列
4. 判定为 Grid(3x3)
```

**子结构（JSON事实 vs 推断）**

| 行 | 列1 | 列2 | 列3 |
|----|-----|-----|-----|
| 1 | 卡片1: 福利平台 | 卡片2: 会员登记 ⚠️ | 卡片3: 工会动态 |
| 2 | 卡片4: 困难帮扶 | 卡片5: 组织机构 | 卡片6: 职代会 |
| 3 | 卡片7: 职工之家 | 卡片8: 个人中心 | 卡片9: 胸科闲余 ⚠️ |

**卡片内容（事实 vs 推断）**

| 元素 | JSON类型 | 子节点数 | 语义推断 | 来源 |
|------|----------|----------|----------|------|
| 卡片1 | GROUP | 4 | 福利平台 | 推断+Screenshot |
| 卡片2 | GROUP | 3 ⚠️ | 会员登记 | 推断+Screenshot |
| 卡片3-8 | GROUP | 4 | 各功能入口 | 推断+Screenshot |
| 卡片9 | GROUP | 3 ⚠️ | 胸科闲余 | 推断+Screenshot |

**结构一致性分析**:
- 标准卡片: 4个子节点（背景+图标+文字+装饰）- JSON事实
- 异常卡片: 3个子节点（卡片2、9缺少装饰）- JSON事实
- 一致率: 7/9 = 计算得77%

---

### 区域 5: 新闻专区

**归组依据**
- **锚点类型**: GROUP
- **锚点名称**: 新闻专区

**布局推断**

| 属性 | 值 | 推断依据 | 置信度 | 来源 |
|------|-----|----------|--------|------|
| 类型 | Grid | 2行2列 | 0.90 | JSON |
| 行数 | 2 | y坐标分2组(694/787) | 0.90 | JSON |
| 列数 | 2 | 每行2个元素 | 0.90 | JSON |

**子结构**

| 行 | 列1 | 列2 |
|----|-----|-----|
| 1 | Group 2: 新闻政策（蓝色） | Group 3: 劳模风采（橙色） |
| 2 | Group 4: 政策文件（粉色） | Group 5: 退休感言（绿色） |

**关键元素（每张卡片 - 事实 vs 推断）**

| 元素 | JSON类型 | 内容示例 | 来源 |
|------|----------|----------|------|
| Rectangle 13 | RECTANGLE | 彩色背景（圆角16px） | JSON |
| 标题 | TEXT | "新闻政策" | JSON（字符内容）|
| 描述 | TEXT | "关注时事热点" | JSON（字符内容）|
| CTA | TEXT | "去看看 >" | JSON（字符内容）|
| 图标 | GROUP/VECTOR | 右侧装饰图标 | 推断+Screenshot |

---

### 区域 6: 活动专区

**归组依据**
- **锚点类型**: GROUP
- **锚点名称**: 活动专区

**布局推断**

| 属性 | 值 | 推断依据 | 置信度 | 来源 |
|------|-----|----------|--------|------|
| 类型 | Row | 1行2列 | 0.90 | JSON |
| 列数 | 2 | 2个卡片横向排列 | 0.90 | JSON |

**子结构（事实 vs 推断）**

| 卡片 | JSON类型 | 位置 | 语义推断 | 来源 |
|------|----------|------|----------|------|
| Group 2 | GROUP | (16, 935) | 线上活动（渐变紫） | 推断+Screenshot |
| Group 3 | GROUP | (193, 935) | 兴趣小组（渐变蓝） | 推断+Screenshot |

---

### 区域 7: 新闻资讯

**归组依据**
- **锚点类型**: GROUP
- **锚点名称**: 资讯

**布局推断**

| 属性 | 值 | 推断依据 | 置信度 | 来源 |
|------|-----|----------|--------|------|
| 类型 | Column | 列表项垂直排列 | 0.90 | JSON |

**子结构（事实 vs 推断）**

| 元素 | JSON类型 | 内容 | 语义推断 | 来源 |
|------|----------|------|----------|------|
| 头部标题 | TEXT | "新闻资讯" | 区域标题 | JSON |
| 头部链接 | TEXT | "更多 >" | 导航链接 | JSON |
| 列表项1 | GROUP | - | 新闻条目1 | 推断+Screenshot |
| 列表项2 | GROUP | - | 新闻条目2 | 推断+Screenshot |

---

## 5. 规则覆盖率与AI介入点

### 5.1 可规则化（自动化）

| 项目 | 覆盖率 | 关键参数 |
|------|--------|----------|
| 锚点识别 | 100% | 优先级: Component > Frame > 背景 > Group |
| 元素归组 | 100% | COVERAGE_THRESHOLD = 0.70 (可调) |
| 排序 | 100% | 按x/y坐标 |
| 布局推断 | 100% | 行列对齐检测 |

### 5.2 需AI介入（低置信度）

| 区域 | 问题 | 置信度 | 需AI判断 |
|------|------|--------|----------|
| 用户信息区 | 元素分散，无统一容器 | 0.70 | 是否创建虚拟容器 |
| 功能入口-卡片2 | 结构不完整 | 0.60 | 是否补齐装饰元素 |
| 功能入口-卡片9 | 结构不完整 | 0.60 | 是否补齐装饰元素 |

### 5.3 语义推断（需AI确认）

| 元素 | 当前名称 | 推断语义 | 置信度 |
|------|----------|----------|--------|
| Group 1 | Group 1 | 活跃度 | 0.80 |
| 1 | 1 | 福利平台 | 0.90 |
| 2 | 2 | 会员登记 | 0.90 |

---

## 6. 细节组合（按第11节规则）

### 6.1 细节归属到结构节点

| 区域 | 结构节点 | 归属细节元素 | 归属依据 |
|------|----------|--------------|----------|
| 用户信息区 | Rectangle 1 (背景) | 头像、用户名、步数、活跃度 | 包含关系（100%覆盖） |
| 轮播图 | 轮播图 (GROUP) | 图片、遮罩、指示器 | 直接父子关系 |
| 功能入口区 | 各卡片 (1-9) | 背景、图标、标题、装饰 | 卡片内部包含 |
| 新闻专区 | 各卡片 (Group 2-5) | 背景、标题、描述、CTA、图标 | 卡片内部包含 |

### 6.2 内部排序与层级（以新闻卡片为例）

**默认顺序**: 标题 → 描述 → CTA / 图标

```
新闻政策 (标题，字号最大)
  ↓
关注时事热点 (描述，次要字号)
  ↓
去看看 > (CTA，链接样式)
  + 右侧图标 (装饰，同层级)
```

### 6.3 缺失与合并处理

| 位置 | 缺失/多余 | 处理方式 | 说明 |
|------|-----------|----------|------|
| 功能卡片2 | 缺少装饰元素 | 不强行补齐 | 保持JSON原样 |
| 功能卡片9 | 缺少装饰元素 | 不强行补齐 | 保持JSON原样 |
| 各卡片背景 | 多余装饰层 | 合并为"装饰层" | 避免干扰主结构 |

### 6.4 布局表达原则

| 区域 | 布局表达 | 说明 |
|------|----------|------|
| 功能入口区 | Grid(3x3) | 相对布局语义，非绝对定位 |
| 新闻专区 | Grid(2x2) | 相对布局语义 |
| 活动专区 | Row(1x2) | 左右排列 |
| 新闻资讯 | Column | 上下排列 |

> 仅在无法解释布局时使用局部绝对定位（本案例不需要）。

---

## 7. 结论

### 结构可还原性

**评级**: 高（估算85%，基于结构清晰度7/8项+布局推断置信度加权）

**理由**:
- ✅ 7个区域划分清晰，归组依据明确
- ✅ 布局推断有高置信度（Grid/Row/Column）
- ⚠️ 2个卡片结构不完整（可规则化标记）
- ⚠️ 部分语义命名需AI确认

### 7.1 关键阈值（经验值，可调）

```yaml
COVERAGE_THRESHOLD: 0.70      # 元素归组覆盖阈值
GRID_ROW_THRESHOLD: 20px      # 同行Y坐标差阈值
GRID_GAP_THRESHOLD: 1.2       # 间距一致性阈值（倍数）
MIN_ANCHOR_AREA: 5000px²      # 最小锚点面积
```

### 7.2 风险点

1. **图标缺失**: 所有VECTOR图标未导出
2. **图片类型**: RECTANGLE + IMAGE fill，需确认处理方式
3. **叠加区域**: 轮播图与用户信息区重叠，已按前景优先处理
