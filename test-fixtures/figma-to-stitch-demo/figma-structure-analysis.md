# Figma 设计稿结构分析

> 文件：胸科首页  
> 分析日期：2026-01-28  
> 分析人：AI Assistant

---

## 一、整体概述

### 视觉层次（从上到下）

| 序号 | 区域 | 类型 | 说明 |
|------|------|------|------|
| 1 | 顶部导航 | COMPONENT | iOS 状态栏 + 标题"首页" |
| 2 | 顶部个人信息 | 分散元素（无容器） | 蓝色背景 + 头像 + 用户名 + 活跃度 + 步数 |
| 3 | 轮播图 | GROUP | 医院大楼图片 + 轮播指示器 |
| 4 | 功能入口卡片 | 9个 GROUP | 3x3 网格布局，图标+文字 |
| 5 | 新闻专区 | GROUP | 2x2 网格，4张彩色卡片 |
| 6 | 活动专区 | GROUP | 1x2 布局，2张彩色卡片 |
| 7 | 新闻资讯 | GROUP | 列表形式，2条新闻 |

---

## 二、详细分析

### 1. 顶部导航容器

**顶层节点：**
- `1.iOS/1.Bars/2.Navigation Bar/*X - Default` (COMPONENT)

**内容：**
- 状态栏（时间、信号、电量）
- 标题"首页"
- 返回按钮

**卡片：** 无

---

### 2. 顶部个人信息区

**说明：** 如遇视觉叠加，按“区域划分细则”中的重叠处理规则归组

**顶层元素（分散）：**
| 元素 | 类型 | 内容 | 位置 |
|------|------|------|------|
| Rectangle 1 | VECTOR | 蓝色背景 | 背景 |
| Ellipse 4 | ELLIPSE | 用户头像 | 前景元素 |
| xkyy0325 | TEXT | 用户名 | 前景元素 |
| 今日步数 | GROUP | 步数"3098" | 前景元素 |
| Group 1 | GROUP | 活跃度"20" | 前景元素 |

**问题：** 缺少显式容器（Frame/Component），结构上仍是独立节点

**卡片：** 无

---

### 3. 轮播图容器

**顶层节点：**
- `轮播图` (GROUP)

**内部结构：**
- 两个矩形图层（疑似图片）
- 轮播点指示器（3个圆点）

**卡片：** 无

---

### 4. 功能入口卡片区（3x3 网格）

**顶层节点：**
- Group 1 ~ Group 9（9个卡片）

**布局：** 3行3列网格
- 第1行：卡片1,2,3
- 第2行：卡片4,5,6
- 第3行：卡片7,8,9

**每张卡片内容：**

| 卡片 | 名称 | 子元素 | 结构 |
|------|------|--------|------|
| Group 1 | 福利平台 | 4个 | 背景+文字+装饰+图标 |
| Group 2 | 会员登记 | 3个 | ❌ 少了装饰元素 |
| Group 3 | 工会动态 | 4个 | 背景+文字+装饰+图标 |
| Group 4 | 困难帮扶 | 4个 | 背景+文字+装饰+图标 |
| Group 5 | 组织机构 | 4个 | 背景+文字+装饰+图标 |
| Group 6 | 职代会 | 4个 | 背景+文字+装饰+图标 |
| Group 7 | 职工之家 | 4个 | 背景+文字+装饰+图标 |
| Group 8 | 个人中心 | 4个 | 背景+文字+装饰+图标 |
| Group 9 | 胸科闲余 | 3个 | ❌ 少了装饰元素 |

**"写得对不对"评估：**
- ✅ 文本字段完整且一致（都只有一个标题文本）
- ✅ 图标是 VECTOR，视觉上是典型"图标+标题"的入口卡片
- ❌ 卡片2和卡片9结构不完整（少了装饰元素）

---

### 5. 新闻专区容器

**顶层节点：**
- `新闻专区` (GROUP)

**内部结构：** 4张卡片（2x2网格）

| 卡片 | 名称 | 内容 |
|------|------|------|
| Group 2 | 新闻政策 | 标题+描述"关注时事热点"+CTA"去看看>" |
| Group 3 | 劳模风采 | 标题+描述"彰显榜样力量"+CTA"去看看>" |
| Group 4 | 政策文件 | 标题+描述"传递发展方向"+CTA"去看看>" |
| Group 5 | 退休感言 | 标题+描述"分享退休心语"+CTA"去看看>" |

**"写得对不对"评估：**
- ✅ 每张卡片都有标题+副文案+CTA，字段齐全
- ✅ 结构一致
- ✅ 4张卡片分别使用不同颜色背景（蓝、橙、粉、绿）

---

### 6. 活动专区容器

**顶层节点：**
- `活动专区` (GROUP)

**内部结构：** 2张卡片（左右布局）

| 卡片 | 名称 | 内容 |
|------|------|------|
| Group 2 | 线上活动 | 标题+副文案"丰富业余生活" |
| Group 3 | 兴趣小组 | 标题+副文案"寻找志同道合" |

**"写得对不对"评估：**
- ✅ 每张卡片是标题+副文案的双层文本结构
- ✅ 字段完整
- ✅ 使用渐变彩色背景

---

### 7. 资讯容器（新闻列表）

**顶层节点：**
- `资讯` (GROUP)

**头部：**
- 标题"新闻资讯"
- 链接"更多>"

**内部结构：** 2条列表项（不是卡片形态，属于列表行）

| 列表项 | 标题 | 摘要 | 时间 | 操作 |
|--------|------|------|------|------|
| 1 | 弘扬延安精神，践行初心使命... | 为传承红色基因，持续加强党员的理想信念教育... | 2025-09-16 16:22 | 详情> |
| 2 | 北京胸科医院"一扫双筛"公益... | 2025年9月10日至14日，中国国际服务贸易交易会... | 2025-09-16 16:22 | 详情> |

**"写得对不对"评估：**
- ✅ 列表项字段齐全（标题/摘要/时间/CTA）
- ✅ 结构一致
- ⚠️ 左侧图片布局需确认（可能为占位或矢量）

---

## 三、问题汇总

### 结构问题

| 问题 | 位置 | 说明 |
|------|------|------|
| 无容器 | 用户信息区 | 头像、用户名等元素是散开的，没有统一容器 |
| 无容器 | 功能卡片 | 9个卡片直接放在根下，没有父容器 |
| 结构不一致 | 功能卡片 | 卡片2和卡片9少了装饰元素 |
| 命名混乱 | 全局 | Group 1,2,3 和 1,2,3,4... 混用 |

### 规范性问题

| 检查项 | 结果 | 说明 |
|--------|------|------|
| Auto Layout | ❌ 0个 | 全是手动摆放 |
| 语义命名 | ❌ 不规范 | 大量 Rectangle, Group, Ellipse |
| Group vs Frame | 33 vs 16 | 应该用 Frame |
| 组件复用 | 少量 | 只有9个 components |

---

## 四、内容正确性评估

### 文本内容

| 区域 | 内容 | 状态 |
|------|------|------|
| 用户名 | xkyy0325 | ✅ 正确 |
| 活跃度 | 20 | ✅ 正确 |
| 步数 | 3098 | ✅ 正确 |
| 功能卡片 | 9个名称 | ✅ 正确 |
| 新闻专区 | 4个标题+描述+CTA | ✅ 正确 |
| 活动专区 | 2个标题+副文案 | ✅ 正确 |
| 新闻资讯 | 2条完整新闻 | ✅ 正确 |

### 视觉内容

| 区域 | 内容 | 状态 |
|------|------|------|
| 头像 | 40x40 圆形 | ✅ 正确 |
| 轮播图 | 医院大楼 | ✅ 正确 |
| 功能图标 | 9个 VECTOR | ✅ 正确（但未导出） |
| 新闻图标 | 4个图标 | ✅ 正确（但未导出） |
| 活动图片 | 2个装饰图 | ✅ 正确 |
| 新闻缩略图 | 未见独立 IMAGE 节点 | ⚠️ 可能为占位或矢量 |

---

## 五、结论

### 优点

1. **视觉完整** - 主要文字内容与颜色正确，图片完整性需确认
2. **位置准确** - absoluteBoundingBox 可以精确定位
3. **内容一致** - 同类卡片的结构基本一致

### 缺点

1. **结构不规范** - 没有 Auto Layout，全靠手动摆放
2. **命名混乱** - Group 1,2,3 没有语义
3. **容器缺失** - 用户信息区和功能卡片没有父容器
4. **图标未导出** - VECTOR 类型的图标需要单独导出 SVG

### 建议

1. **提取策略** - 不要依赖结构，要靠位置和尺寸推断
2. **图标处理** - 需要 Figma API 导出 SVG，或用 Lucide 替代
3. **布局生成** - 根据 absoluteBoundingBox 计算 flex/grid 布局
4. **命名优化** - 根据内容生成语义化命名（welfare, member 等）

---

## 六、转换思路（1-4）

1. **顶层分区**  
   按 absoluteBoundingBox 的绝对坐标，把页面划分为 7 个区域：  
   导航 / 个人信息 / 轮播 / 9宫格 / 新闻专区 / 活动专区 / 资讯列表。

2. **卡片优先**  
   先保证每个卡片内部结构正确：标题/副文案/CTA/图标。  
   缺什么就写什么，不强行补齐，保持“局部视觉正确”。

3. **容器拼装**  
   以卡片为单位放入容器：  
   - 9 宫格 → GRID 3x3  
   - 新闻专区 → GRID 2x2  
   - 活动专区 → FLEX 1x2  
   - 资讯列表 → LIST/纵向 SECTION

4. **坐标只做辅助**  
   绝对坐标用于分区和排序，不直接输出到 DSL。  
   DSL 以相对布局/结构语义为主，保证可读性与可维护性。

---

## 七、通用原则：自动化规则 vs AI

### 一、可自动化规则（不依赖 AI）

1. **分区/容器检测（绝对区域）**  
   基于 absoluteBoundingBox 做聚类与包含关系判断，把页面切成若干“区域容器”。

2. **容器内排序与布局推断**  
   按 x/y 排序、间距一致性、对齐一致性判断 grid / row / column / list。

3. **卡片识别与合并**  
   以背景矩形（圆角/阴影/边框/纯色）为锚点，吸附落在区域内的子元素。

4. **内容分层与基础语义提取**  
   按字号/权重/位置区分标题、正文、CTA、图标、缩略图等。

5. **事实 vs 推断标注**  
   明确哪些来自 JSON 事实（节点类型、坐标、层级），哪些来自截图推断（视觉归属、组件形态）。

6. **来源标注**  
   对关键判断标注来源：JSON / Screenshot / Both。

7. **置信度标注**  
   所有布局推断、组件类型推断需给出高/中/低或数值置信度。

8. **结构语义优先**  
   避免直接用组件名作为结构结论，优先使用 Row/Grid/Column/Stack 等结构语义描述。

9. **比例数值说明**  
   任何覆盖率/重叠率等比例数值必须注明“估算/计算/经验值”。

10. **事实优先级**  
    “事实”仅指 JSON 可验证项（type/box/children/text），截图仅作为推断补充。

11. **结论一致性**  
    报告末尾结论必须与前文事实一致，避免“图片存在/不存在”冲突。

---

### 二、需要 AI 的部分（规则难覆盖）

1. **语义理解**  
   区域命名（活动专区/新闻专区）、CTA 文本识别等。

2. **跨层级合并**  
   元素不在同一父级但视觉上属于同一卡片的情况。

3. **组件类型推断**  
   识别“卡片 vs 列表项 vs Banner”等组合型组件。

---

### 三、推荐组合策略（规则 → AI）

1. **先规则化提取**：分区、归组、布局、基础语义  
2. **标记低置信度节点**：不确定结构/命名/组件类型  
3. **AI 只处理低置信度**：补齐语义、纠错、合并  
4. **最终合并输出**：规则结果为主，AI 结果为辅

---

## 八、区域划分细则（JSON 为主）

### 1) 预处理
- 只保留 `visible=true` 的节点
- 过滤极小节点（例如 < 3px 的装饰点）
- 统一读取 `absoluteBoundingBox` 作为坐标基础

### 2) 容器锚点候选
优先级（避免误把背景当 Header）：
1. COMPONENT / FRAME（语义容器优先）
2. 大面积矩形/Frame（有 fill、圆角、阴影）
3. 明显背景块（面积占父级 60%+，矩形/Frame）
4. 大尺寸 Group（作为兜底容器）

### 3) 归组规则（包含/覆盖）
- 如果节点 B 被锚点 A 覆盖面积 > 70% → 归入 A  
- 如果 B 落在多个锚点里 → 选择“最小且能包含它”的 A（必要时按锚点优先级裁决）  
- 没有锚点时，进入空间聚类（见下）

### 4) 空间聚类（兜底）
- 用节点中心点做聚类（例如 DBSCAN 或网格桶）  
- 距离阈值 ≈ 平均间距 × 1.2  
- 每个簇视为一个区域容器

### 5) 容器内布局推断
- 按 y 分行（y 差 < 20px 归同一行）
- 每行按 x 排序
- 多行且列数一致 → GRID
- 单行 → ROW
- 单列 → COLUMN / LIST

> 注意：**不能先用 y 范围切块再归组**。正确流程是：  
> 先用锚点 + 覆盖规则完成归组，**再统计每组的 y 范围** 作为描述性输出。

### 6) 区域重叠处理（通用原则）
- **前景组件优先**：视觉上独立的组件（如轮播/卡片/列表）作为独立区域或子区域  
- **背景不吞并前景**：背景块覆盖关系不能强行吞并前景组件  
- **锚点裁决**：重叠时按“最小包含 + 高优先级锚点”归组  

> 说明：同一区域内的独立节点若被同一背景块覆盖，可归入同一区域

> 说明：当视觉是对的但结构不规范时，上述规则足够自动化分区与归组。

---

## 九、SAM 兜底说明（可选）

### 何时需要
- JSON 层级极乱、容器缺失
- 背景矩形缺失或与视觉不一致

### 使用方式（简述）
1. 用截图跑 SAM 得到 mask  
2. 将 mask 转为 bounding box  
3. 与 JSON 节点做 IoU 匹配，补出容器边界  

### 模型体积（常见权重大小）
- SAM ViT-H：约 2.6GB  
- SAM ViT-L：约 1.3GB  
- SAM ViT-B：约 0.4GB  

> 结论：JSON 为主、SAM 兜底，不作为常规流程。

---

## 十、标准格式模板（案例）

### 1. 基本信息
- 文件名：
- 页面名称：
- 分析日期：
- 分析人：

### 2. 顶层区域总览（基于归组结果）
- 区域数量：
- 区域列表（按视觉顺序）：
  - 区域A：类型 / 布局 / 主要内容
  - 区域B：类型 / 布局 / 主要内容
  - …

### 3. 区域详细拆解（每个区域一段）
- 区域名称：
- 归组依据：锚点类型 / 覆盖规则 / 聚类
- 布局判断：Grid / Row / Column / List / Stack
- 子结构：
  - 卡片数量：
  - 卡片结构一致性：一致 / 部分不一致（说明差异）
  - 关键元素：标题 / 描述 / CTA / 图标 / 图片（是否齐全）
- 异常/缺失：
  - 缺失元素：
  - 命名异常：
  - 结构异常：

### 4. 规则覆盖率（自动化可处理项）
- 可规则化：分区 / 排序 / 布局 / 基础语义
- 难规则化：语义命名 / 组合组件判定 / 跨层级合并

### 5. 需要 AI 介入的点
- 低置信度区域：
- 语义不确定元素：
- 结构冲突点：

### 6. 结论与产出要点
- 结构可还原性：高 / 中 / 低
- 建议输出方式：优先结构化 DSL / 允许局部绝对
- 风险点：
  - …

---

## 十一、细节组合规则（结构已确定后）

### 1) 细节必须归属到结构节点
- 每个细节元素（文本/图标/图片/背景）必须挂在某个结构节点之下  
- 归属依据：包含关系 → 最近距离 → 对齐关系

### 2) 内部排序与层级
- 标题 → 描述 → CTA / 图标（默认顺序）
- 无明确顺序时，以字号/权重从大到小排序

### 3) 缺失与合并
- 缺失元素不强行补齐
- 多余装饰元素可合并为“装饰层”或忽略，避免干扰主结构

### 4) 布局表达原则
- 优先使用相对布局语义（上下/左右/居中）
- 仅在无法解释布局时使用局部绝对定位
